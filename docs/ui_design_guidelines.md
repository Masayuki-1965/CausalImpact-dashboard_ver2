# UI/UXデザイン統一ガイドライン

## 概要

このドキュメントは、Causal Impact分析アプリケーションのUI/UXデザイン統一方針を定めたものです。
一貫性のあるユーザーエクスペリエンスを提供するため、すべての開発者・デザイナーが遵守すべき基準を明記しています。

## デザイン原則

### 1. 階層構造の明確化
- **大項目（セクションタイトル）**: 左側に青線があるタイトル
- **中項目**: 黒字、太字、適度な余白
- **説明文**: 通常の文字サイズ、適切な行間
- **注釈文**: 小さめの文字、グレー系の色

### 2. カラーパレット
- **プライマリカラー**: #1976d2（青）
- **セカンダリカラー**: #ef5350（赤）
- **テキストカラー**: #333333（濃いグレー）
- **注釈テキスト**: #666666（中程度のグレー）
- **背景色**: #ffffff（白）

### 3. タイポグラフィ

#### 大項目（セクションタイトル）
```html
<div class="section-title">タイトル</div>
```

#### 中項目
```html
<div style="font-weight:bold;margin-bottom:1em;font-size:1.05em;">中項目タイトル</div>
```

#### 分析条件表示スタイル（中項目の統一ルール）
分析条件や統計情報を表示する際の統一スタイル：

**横並び形式（推奨）:**
```html
<div style="margin-bottom:0.8em;">
<span style="font-weight:bold;font-size:1.05em;">項目名：</span>
<span style="color:#424242;">項目の値</span>
</div>
```

**縦並び形式（必要な場合のみ）:**
```html
<div style="font-weight:bold;margin-bottom:0.5em;font-size:1.05em;">項目名</div>
<div style="margin-bottom:1em;color:#424242;">項目の値</div>
```

**適用例:**
- 分析対象：雨戸_台風の影響あり（vs 一般サッシ）
- 分析期間：2017-04-01 ～ 2020-10-01
- 分析手法：二群比較（Two-Group Causal Impact）
- データ粒度：月次
- 信頼水準：95%

**特徴:**
- 通常は横並び形式を使用（コンパクトで視認性が高い）
- ラベル部分は太字（font-weight:bold）、フォントサイズ1.05em
- 値部分は通常の文字色で若干薄めのグレー（#424242）
- 各項目間に適度な余白（margin-bottom:0.8em）を確保
- コロン（：）の右側に半角スペースを入れてから値を配置

#### 説明文
- 通常のStreamlitマークダウン
- 行間: 1.6-1.7

#### 注釈文
```html
<span style="color:#666;font-size:0.95em;">注釈テキスト</span>
```

### 4. レイアウト原則

#### 余白・間隔
- セクション間: 適度な余白を確保
- 要素間: 一貫した間隔を維持
- 左右の余白: コンテナ幅に応じて調整

#### グリッドシステム
- Streamlitの`st.columns()`を活用
- 2カラム、3カラム、4カラムレイアウトを適切に使い分け

### 5. インタラクティブ要素

#### ボタン
- プライマリボタン: `type="primary"`
- セカンダリボタン: デフォルトスタイル
- 幅: `use_container_width=True`で統一

#### 入力フィールド
- ラベルは明確で簡潔に
- ヘルプテキストを適切に配置
- バリデーションメッセージは一貫したスタイル

### 6. メッセージ表示の統一ルール

#### 手順・注意喚起系（青系）
- **使用場面**: 操作手順の説明、推奨事項の案内、システムからの情報提供
- **スタイル**: `st.info()` または背景薄青＋濃青文字
- **例**:
  - 「単群推定では、介入前のデータから季節性やトレンドを学習し...」
  - 「推奨介入ポイント: 2022-10-24 （データ全体の60%地点）」
  - 分析タイプの説明文

#### 実行・処理結果系（緑系）
- **使用場面**: 処理完了の通知、成功メッセージ、設定完了の確認
- **スタイル**: `st.success()` または背景薄緑＋濃緑文字
- **例**:
  - 「データを読み込みました。下記にプレビューと統計情報を表示します。」
  - 「✅ データ量：653ポイント（分析に十分なデータ量が確保されています）」
  - 「✅ 介入前期間比率: 69.5% （推奨: 60%以上）」
  - 「データセットの作成が完了しました。次のステップで...」

#### 警告・注意系（オレンジ系）
- **使用場面**: 推奨値未満の警告、設定上の注意点
- **スタイル**: `st.warning()` または背景薄オレンジ＋濃オレンジ文字
- **例**:
  - 「⚠️ 介入前期間比率: 45.0% （推奨: 60%以上）」
  - データ量不足の警告

#### エラー系（赤系）
- **使用場面**: エラー発生、必須項目未入力、設定値の問題
- **スタイル**: `st.error()` または背景薄赤＋濃赤文字
- **例**:
  - データ読み込み失敗
  - 期間設定の妥当性エラー

### 7. データ表示

#### テーブル
- ヘッダーは太字
- 行間は適度に確保
- 数値は右寄せ、テキストは左寄せ

#### グラフ・チャート
- カラーパレットを統一
- 凡例は上部中央に配置
- レンジスライダーを標準装備

## 禁止事項

### 1. アイコンの使用
- 絵文字やアイコンの使用は極力控える
- 必要な場合は事前に承認を得る

### 2. 色の無秩序な使用
- 定義されたカラーパレット以外の色は使用しない
- 装飾目的での色の多用は避ける

### 3. フォントサイズの不統一
- 階層に応じたフォントサイズを遵守
- 任意のサイズ指定は避ける

## チェックリスト

新機能開発・既存機能修正時は以下を確認：

- [ ] セクションタイトルは適切なスタイルか
- [ ] 中項目のフォントサイズ・色は統一されているか
- [ ] 分析条件表示は統一ガイドライン（コロン形式）に準拠しているか
- [ ] 分析条件は横並び形式で表示されているか（推奨）
- [ ] カラーパレットに準拠しているか
- [ ] 余白・間隔は一貫しているか
- [ ] アイコンを不必要に使用していないか
- [ ] ボタンスタイルは統一されているか
- [ ] テーブル・グラフのスタイルは一貫しているか
- [ ] メッセージ表示の色使いルールに準拠しているか
  - [ ] 手順・注意喚起系は青系（st.info）
  - [ ] 実行・処理結果系は緑系（st.success）
  - [ ] 警告・注意系はオレンジ系（st.warning）
  - [ ] エラー系は赤系（st.error）
- [ ] 分析結果表示は表形式で見やすく整理されているか
- [ ] 指標説明は展開可能な形式で提供されているか
- [ ] 指標説明の信頼区間は「XX%」形式で汎用性を確保しているか
- [ ] 高度なパラメータの見出しは重複していないか
- [ ] パラメータ表のヘッダーは「高度なパラメータ名」になっているか

## 更新履歴

- 2024-12-XX: 初版作成
- 2024-12-XX: アイコン使用禁止、フォント統一方針を追加
- 2024-12-XX: メッセージ表示の統一ルール（色使い分け）を追加
- 2024-12-XX: 分析条件表示スタイル（コロン形式）を追加、分析結果の表形式表示・指標説明の展開機能を追加
- 2024-12-XX: 分析条件の横並び表示を推奨に変更、指標説明の汎用性向上（「XX%」表記）、高度なパラメータ表の見出し改善

## 関連ファイル

- `config/help_texts.py`: ヘルプテキスト定数
- `styles/`: CSSスタイルファイル
- `app_enhanced.py`: メインアプリケーション

---

**注意**: このガイドラインは継続的に更新されます。新しい要件や改善点があれば、チーム内で議論の上、このドキュメントを更新してください。 